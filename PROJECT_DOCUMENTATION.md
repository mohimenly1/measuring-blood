# ๐ ุงูุชูุซูู ุงูุดุงูู ููุดุฑูุน ููุงุณ ุถุบุท ุงูุฏู ุงูุฐูู

## ุฏููู ุดุงูู ูููุจุชุฏุฆูู - ูุดุฑูุน ุชุฎุฑุฌ

---

## ๐ ุฌุฏูู ุงููุญุชููุงุช

1. [ูุธุฑุฉ ุนุงูุฉ ุนูู ุงููุดุฑูุน](#ูุธุฑุฉ-ุนุงูุฉ-ุนูู-ุงููุดุฑูุน)
2. [ุงูุจููุฉ ุงูุชูููุฉ ููุชุทุจูู](#ุงูุจููุฉ-ุงูุชูููุฉ-ููุชุทุจูู)
3. [ุขููุฉ ุนูู ุงูุชุทุจูู ุฎุทูุฉ ุจุฎุทูุฉ](#ุขููุฉ-ุนูู-ุงูุชุทุจูู-ุฎุทูุฉ-ุจุฎุทูุฉ)
4. [ูุธุงู ุงููุตุงุฏูุฉ ูุงูุฃูุงู](#ูุธุงู-ุงููุตุงุฏูุฉ-ูุงูุฃูุงู)
5. [ุขููุฉ ููุงุณ ุถุบุท ุงูุฏู ูู ุงูุตูุฑ](#ุขููุฉ-ููุงุณ-ุถุบุท-ุงูุฏู-ูู-ุงูุตูุฑ)
6. [ูุธุงู ุฌูุน ุงูุจูุงูุงุช ููุชุฏุฑูุจ](#ูุธุงู-ุฌูุน-ุงูุจูุงูุงุช-ููุช ุฏุฑูุจ)
7. [ุขููุฉ ุชุฏุฑูุจ ุงููููุฐุฌ ุจุงูุชูุตูู](#ุขููุฉ-ุชุฏุฑูุจ-ุงููููุฐุฌ-ุจุงูุชูุตูู)
8. [ุงูุจููุฉ ุงูุชูููุฉ ูููููุฐุฌ (CNN)](#ุงูุจููุฉ-ุงูุชูููุฉ-ูููููุฐุฌ-cnn)
9. [ููููุฉ ุงุณุชุฎุฏุงู ุงูุชุทุจูู](#ููููุฉ-ุงุณุชุฎุฏุงู-ุงูุชุทุจูู)
10. [ุงูููุฒุงุช ุงูุชูููุฉ](#ุงูููุฒุงุช-ุงูุชูููุฉ)
11. [ุงูุชุญุฐูุฑุงุช ุงููููุฉ](#ุงูุชุญุฐูุฑุงุช-ุงููููุฉ)
12. [ุงูุฎูุงุตุฉ](#ุงูุฎูุงุตุฉ)

---

## ๐ฏ ูุธุฑุฉ ุนุงูุฉ ุนูู ุงููุดุฑูุน

### ูุง ูู ูุฐุง ุงููุดุฑูุนุ

ูุฐุง ูุดุฑูุน **ูุธุงู ุฐูู ูููุงุณ ุถุบุท ุงูุฏู** ุจุฏูู ุงูุญุงุฌุฉ ูุฃุฌูุฒุฉ ุทุจูุฉ ุชูููุฏูุฉ. ูุณุชุฎุฏู ุงูุชุทุจูู:
- **ุงููุงููุฑุง** ูู ุงููุงุชู ุงููุญููู
- **ุงูุฐูุงุก ุงูุงุตุทูุงุนู (CNN)** ูุชุญููู ุงูุตูุฑ
- **ุงูุชุนูู ุงูุขูู** ููุชูุจุค ุจุถุบุท ุงูุฏู

### ุงููุฏู ูู ุงููุดุฑูุน

ุจูุงุก ูุธุงู ููููู:
1. โ ููุงุณ ุถุบุท ุงูุฏู ูู ุตูุฑุฉ ูุฏ ุงููุณุชุฎุฏู
2. โ ุญูุธ ุณุฌู ุงูููุงุณุงุช
3. โ ุชูุฏูู ุชูุตูุงุช ุตุญูุฉ ุฐููุฉ
4. โ ุฌูุน ุจูุงูุงุช ููุชุฏุฑูุจ ุงููุณุชูุฑ
5. โ ุชุญุณูู ุงูุฏูุฉ ูุน ุงูููุช

### ุงููุฆุฉ ุงููุณุชูุฏูุฉ

- ุงูุฃุดุฎุงุต ุงูุฐูู ูุญุชุงุฌูู ูุฑุงูุจุฉ ููุชุธูุฉ ูุถุบุท ุงูุฏู
- ุงููุฑุถู ุงูุฐูู ูุฑูุฏูู ุชุชุจุน ุถุบุท ุงูุฏู ุจุณูููุฉ
- ุงูุจุงุญุซูู ูู ูุฌุงู ุงูุตุญุฉ ุงูุฑูููุฉ

---

## ๐๏ธ ุงูุจููุฉ ุงูุชูููุฉ ููุชุทุจูู

### ุงูููููุงุช ุงูุฑุฆูุณูุฉ

ูุชููู ุงูุชุทุจูู ูู **ุซูุงุซุฉ ููููุงุช ุฑุฆูุณูุฉ**:

```
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ                   1. Flutter App                         โ
โ              (ูุงุฌูุฉ ุงููุณุชุฎุฏู - Frontend)                โ
โ  - ุดุงุดุฉ ุชุณุฌูู ุงูุฏุฎูู                                    โ
โ  - ุดุงุดุฉ ุงูููุงุณ                                          โ
โ  - ุดุงุดุฉ ุงูุชุงุฑูุฎ                                         โ
โโโโโโโโโโโโโโโโโโโโโโฌโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
                     โ
                     โ HTTP Requests
                     โ (JSON, Images)
                     โผ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ             2. FastAPI Backend (Python)                   โ
โ              (ุงูุฎุงุฏู - Backend)                          โ
โ  - ูุนุงูุฌุฉ ุงูุทูุจุงุช                                       โ
โ  - ุชุญููู ุงูุตูุฑ                                          โ
โ  - ูููุฐุฌ CNN                                             โ
โ  - ูุงุนุฏุฉ ุงูุจูุงูุงุช                                        โ
โโโโโโโโโโโโโโโโโโโโโโฌโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
                     โ
                     โ SQL Queries
                     โผ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ             3. MySQL Database                            โ
โ              (ูุงุนุฏุฉ ุงูุจูุงูุงุช)                           โ
โ  - ุฌุฏูู ุงููุณุชุฎุฏููู                                      โ
โ  - ุฌุฏูู ุงูููุงุณุงุช                                        โ
โ  - ุฌุฏูู ุจูุงูุงุช ุงูุชุฏุฑูุจ                                  โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
```

### 1. ุชุทุจูู Flutter (Frontend)

#### ูุง ูู Flutterุ
Flutter ูู ุฅุทุงุฑ ุนูู ูู Google ูุจูุงุก ุชุทุจููุงุช ุงููุงุชู ุงููุญููู (Android ู iOS).

#### ุงููููุงุช ุงูุฑุฆูุณูุฉ:

```
blood_pressure_app/
โโโ lib/
โ   โโโ main.dart                    # ููุทุฉ ุงูุจุฏุงูุฉ
โ   โโโ screens/
โ   โ   โโโ login_screen.dart         # ุดุงุดุฉ ุชุณุฌูู ุงูุฏุฎูู
โ   โ   โโโ home_screen.dart          # ุงูุดุงุดุฉ ุงูุฑุฆูุณูุฉ
โ   โ   โโโ camera_screen.dart        # ุดุงุดุฉ ุงููุงููุฑุง
โ   โ   โโโ history_screen.dart       # ุดุงุดุฉ ุงูุชุงุฑูุฎ
โ   โโโ services/
โ       โโโ auth_service.dart         # ุฎุฏูุฉ ุงููุตุงุฏูุฉ
โ       โโโ api_service.dart          # ุฎุฏูุฉ ุงูุงุชุตุงู ุจุงูุฎุงุฏู
```

#### ุงูุชูููุงุช ุงููุณุชุฎุฏูุฉ:
- **Flutter SDK**: ุฅุทุงุฑ ุงูุนูู ุงูุฃุณุงุณู
- **Provider**: ูุฅุฏุงุฑุฉ ุงูุญุงูุฉ (State Management)
- **HTTP**: ููุงุชุตุงู ุจุงูุฎุงุฏู
- **Camera**: ูููุตูู ุฅูู ุงููุงููุฑุง
- **Shared Preferences**: ูุญูุธ ุจูุงูุงุช ุงููุณุชุฎุฏู ูุญููุงู

### 2. Backend Python (FastAPI)

#### ูุง ูู FastAPIุ
FastAPI ูู ุฅุทุงุฑ ุนูู ุญุฏูุซ ูุณุฑูุน ูุจูุงุก APIs ุจุงุณุชุฎุฏุงู Python.

#### ุงููููุงุช ุงูุฑุฆูุณูุฉ:

```
backend/
โโโ main.py                           # ููุทุฉ ุงูุจุฏุงูุฉ - API ุงูุฑุฆูุณู
โโโ database.py                       # ุชุนุฑูู ูุงุนุฏุฉ ุงูุจูุงูุงุช
โโโ models/
โ   โโโ blood_pressure_model.py       # ูููุฐุฌ CNN
โ   โโโ health_recommendations.py     # ูููุฐุฌ ุงูุชูุตูุงุช ุงูุตุญูุฉ
โโโ train_model.py                    # ุณูุฑูุจุช ุงูุชุฏุฑูุจ
โโโ export_training_data.py           # ุชุตุฏูุฑ ุจูุงูุงุช ุงูุชุฏุฑูุจ
```

#### ุงูุชูููุงุช ุงููุณุชุฎุฏูุฉ:
- **FastAPI**: ุฅุทุงุฑ ุนูู API
- **TensorFlow/Keras**: ููุฐูุงุก ุงูุงุตุทูุงุนู
- **OpenCV**: ููุนุงูุฌุฉ ุงูุตูุฑ
- **SQLAlchemy**: ููุชุนุงูู ูุน ูุงุนุฏุฉ ุงูุจูุงูุงุช
- **JWT**: ูููุตุงุฏูุฉ
- **bcrypt**: ูุชุดููุฑ ูููุงุช ุงููุฑูุฑ

### 3. ูุงุนุฏุฉ ุงูุจูุงูุงุช MySQL

#### ุงูุฌุฏุงูู ุงูุฑุฆูุณูุฉ:

##### ุฌุฏูู `users` (ุงููุณุชุฎุฏููู):
```sql
CREATE TABLE users (
    id INT PRIMARY KEY AUTO_INCREMENT,
    name VARCHAR(100),
    email VARCHAR(100) UNIQUE,
    password_hash VARCHAR(255),
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);
```

##### ุฌุฏูู `measurements` (ุงูููุงุณุงุช):
```sql
CREATE TABLE measurements (
    id INT PRIMARY KEY AUTO_INCREMENT,
    user_id INT,
    systolic FLOAT,
    diastolic FLOAT,
    image_path VARCHAR(255),
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    FOREIGN KEY (user_id) REFERENCES users(id)
);
```

##### ุฌุฏูู `training_data` (ุจูุงูุงุช ุงูุชุฏุฑูุจ):
```sql
CREATE TABLE training_data (
    id INT PRIMARY KEY AUTO_INCREMENT,
    user_id INT,
    image_path VARCHAR(255),
    systolic INT,
    diastolic INT,
    is_verified BOOLEAN DEFAULT TRUE,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    FOREIGN KEY (user_id) REFERENCES users(id)
);
```

---

## ๐ ุขููุฉ ุนูู ุงูุชุทุจูู ุฎุทูุฉ ุจุฎุทูุฉ

### ุงูุณููุงุฑูู ุงููุงูู: ูู ุงูุชุณุฌูู ุฅูู ุงูููุงุณ

#### ุงูุฎุทูุฉ 1: ุชุณุฌูู ุงูุฏุฎูู ุฃู ุฅูุดุงุก ุญุณุงุจ

```
ุงููุณุชุฎุฏู ููุชุญ ุงูุชุทุจูู
    โ
ูุฎุชุงุฑ "ุชุณุฌูู ุงูุฏุฎูู" ุฃู "ุฅูุดุงุก ุญุณุงุจ ุฌุฏูุฏ"
    โ
ูุฏุฎู ุงูุจูุงูุงุช (ุงูุงุณูุ ุงูุจุฑูุฏ ุงูุฅููุชุฑูููุ ูููุฉ ุงููุฑูุฑ)
    โ
Flutter App ูุฑุณู ุงูุทูุจ ุฅูู Backend
    โ
Backend ูุชุญูู ูู ุงูุจูุงูุงุช:
  - ุฅุฐุง ูุงู ุชุณุฌูู ุฌุฏูุฏ: ูุญูุธ ุงููุณุชุฎุฏู ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช
  - ุฅุฐุง ูุงู ุชุณุฌูู ุฏุฎูู: ูุชุญูู ูู ูููุฉ ุงููุฑูุฑ
    โ
Backend ูุฑุณู Token (JWT) ููุชุทุจูู
    โ
Flutter App ูุญูุธ Token ูุญููุงู
    โ
ูุชู ุชูุฌูู ุงููุณุชุฎุฏู ุฅูู ุงูุดุงุดุฉ ุงูุฑุฆูุณูุฉ
```

**ุงูููุฏ ูู Flutter:**
```dart
// ูู login_screen.dart
Future<void> _handleSubmit() async {
  final authService = Provider.of<AuthService>(context, listen: false);
  
  try {
    if (_isLogin) {
      await authService.login(_emailController.text, _passwordController.text);
    } else {
      await authService.register(
        _nameController.text,
        _emailController.text,
        _passwordController.text,
      );
    }
    // ุจุนุฏ ุงููุฌุงุญุ AuthWrapper ุณูููู ุงููุณุชุฎุฏู ุชููุงุฆูุงู
  } catch (e) {
    // ุนุฑุถ ุฑุณุงูุฉ ุฎุทุฃ
  }
}
```

**ุงูููุฏ ูู Backend:**
```python
# ูู main.py
@app.post("/api/auth/login")
async def login(form_data: OAuth2PasswordRequestForm, db: Session):
    user = db.query(User).filter(User.email == form_data.username).first()
    
    if not user or not verify_password(form_data.password, user.password_hash):
        raise HTTPException(status_code=401, detail="ุจูุงูุงุช ุฎุงุทุฆุฉ")
    
    access_token = create_access_token(data={"sub": str(user.id)})
    return {"access_token": access_token, "token_type": "bearer"}
```

#### ุงูุฎุทูุฉ 2: ููุงุณ ุถุบุท ุงูุฏู

```
ุงููุณุชุฎุฏู ูุถุบุท ุนูู ุฒุฑ "ููุงุณ ุถุบุท ุงูุฏู"
    โ
ูุชู ูุชุญ ุดุงุดุฉ ุงููุงููุฑุง
    โ
ุงููุณุชุฎุฏู ูุถุน ูุฏู ุนูู ุงููุงููุฑุง
    โ
ูุถุบุท ุนูู ุฒุฑ "ุงูุชูุงุท ุตูุฑุฉ"
    โ
Flutter App ููุชูุท ุงูุตูุฑุฉ
    โ
ูุชู ุฅุฑุณุงู ุงูุตูุฑุฉ ุฅูู Backend ูุน Token
    โ
Backend ูุชุญูู ูู Token (ุงููุตุงุฏูุฉ)
    โ
Backend ูุญูุธ ุงูุตูุฑุฉ ูู ูุฌูุฏ uploads/
    โ
Backend ูุฑุณู ุงูุตูุฑุฉ ุฅูู ูููุฐุฌ CNN
    โ
ูููุฐุฌ CNN ูุญูู ุงูุตูุฑุฉ:
  1. ูุนุงูุฌุฉ ุงูุตูุฑุฉ (Resize, Normalize)
  2. ุงุณุชุฎุฑุงุฌ ุงูููุฒุงุช (VGG16)
  3. ุงูุชูุจุค ุจุถุบุท ุงูุฏู (Systolic, Diastolic)
    โ
Backend ูุญุตู ุนูู ุงููุชุงุฆุฌ:
  - Systolic: 120
  - Diastolic: 80
    โ
Backend ูุฑุณู ุงููุชุงุฆุฌ ุฅูู ูููุฐุฌ ุงูุชูุตูุงุช ุงูุตุญูุฉ
    โ
ูููุฐุฌ ุงูุชูุตูุงุช ูุนุทู ุชูุตูุงุช ุจูุงุกู ุนูู ุงููุชุงุฆุฌ
    โ
Backend ูุญูุธ ุงูููุงุณ ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช
    โ
Backend ูุฑุณู ุงููุชุงุฆุฌ ุฅูู Flutter App
    โ
Flutter App ูุนุฑุถ ุงููุชุงุฆุฌ ูููุณุชุฎุฏู
```

**ุงูููุฏ ูู Flutter:**
```dart
// ูู home_screen.dart
Future<void> _takePicture() async {
  final image = await Navigator.push(
    context,
    MaterialPageRoute(
      builder: (context) => CameraScreen(cameras: _cameras),
    ),
  );
  
  if (image != null) {
    final result = await apiService.measureBloodPressure(image);
    // ุนุฑุถ ุงููุชุงุฆุฌ
  }
}
```

**ุงูููุฏ ูู Backend:**
```python
# ูู main.py
@app.post("/api/measure")
async def measure_blood_pressure(
    image: UploadFile,
    current_user: User = Depends(get_current_user),
):
    # ุญูุธ ุงูุตูุฑุฉ
    file_path = UPLOAD_DIR / f"{current_user.id}_{timestamp}.jpg"
    with open(file_path, "wb") as buffer:
        shutil.copyfileobj(image.file, buffer)
    
    # ุชุญููู ุงูุตูุฑุฉ
    result = bp_model.predict(str(file_path))
    
    # ุงูุญุตูู ุนูู ุงูุชูุตูุงุช
    recommendations = recommendations_ai.get_recommendations(
        result['systolic'], result['diastolic']
    )
    
    # ุญูุธ ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช
    measurement = Measurement(
        user_id=current_user.id,
        systolic=result['systolic'],
        diastolic=result['diastolic'],
        image_path=str(file_path),
    )
    db.add(measurement)
    db.commit()
    
    return {
        "systolic": result['systolic'],
        "diastolic": result['diastolic'],
        "recommendations": recommendations['recommendations'],
    }
```

#### ุงูุฎุทูุฉ 3: ุญูุธ ุจูุงูุงุช ุงูุชุฏุฑูุจ

```
ุจุนุฏ ุนุฑุถ ุงููุชุงุฆุฌุ ุงูุชุทุจูู ูุณุฃู ุงููุณุชุฎุฏู:
"ูู ุชุฑูุฏ ุฅุฏุฎุงู ุงููููุฉ ุงูุญููููุฉ ูู ุฌูุงุฒู ุงูุทุจูุ"
    โ
ุงููุณุชุฎุฏู ูุฏุฎู ุงูููู ุงูุญููููุฉ:
  - Systolic: 125
  - Diastolic: 82
    โ
Flutter App ูุฑุณู:
  - ุงูุตูุฑุฉ
  - ุงูููู ุงูุญููููุฉ
  - Token
    โ
Backend ูุญูุธ ุงูุจูุงูุงุช ูู ุฌุฏูู training_data
    โ
ูุฐู ุงูุจูุงูุงุช ุณุชูุณุชุฎุฏู ูุงุญูุงู ูุชุฏุฑูุจ ุงููููุฐุฌ
```

---

## ๐ ูุธุงู ุงููุตุงุฏูุฉ ูุงูุฃูุงู

### ูุง ูู JWT (JSON Web Token)ุ

JWT ูู ุทุฑููุฉ ุขููุฉ ูููู ูุนูููุงุช ุงููุณุชุฎุฏู ุจูู ุงูุชุทุจูู ูุงูุฎุงุฏู.

### ููู ูุนููุ

#### 1. ุนูุฏ ุชุณุฌูู ุงูุฏุฎูู:

```
ุงููุณุชุฎุฏู ูุฏุฎู ุงูุจุฑูุฏ ุงูุฅููุชุฑููู ููููุฉ ุงููุฑูุฑ
    โ
Backend ูุชุญูู ูู ุงูุจูุงูุงุช
    โ
ุฅุฐุง ูุงูุช ุตุญูุญุฉุ Backend ููุดุฆ Token:
  {
    "user_id": 5,
    "exp": 1234567890  // ุชุงุฑูุฎ ุงูุชูุงุก
  }
    โ
Backend ูููุน Token ุจููุชุงุญ ุณุฑู (SECRET_KEY)
    โ
Backend ูุฑุณู Token ุฅูู ุงูุชุทุจูู
```

#### 2. ุนูุฏ ุฅุฑุณุงู ุทูุจ ูุญูู:

```
Flutter App ูุฑุณู Token ูู Header:
  Authorization: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...
    โ
Backend ูุชุญูู ูู Token:
  1. ูุชุญูู ูู ุงูุชูููุน
  2. ูุชุญูู ูู ุชุงุฑูุฎ ุงูุงูุชูุงุก
  3. ูุณุชุฎุฑุฌ user_id
    โ
ุฅุฐุง ูุงู Token ุตุญูุญุ Backend ูุนุงูุฌ ุงูุทูุจ
ุฅุฐุง ูุงู Token ุฎุงุทุฆ ุฃู ููุชููุ Backend ูุฑูุถ ุงูุทูุจ (401)
```

**ุงูููุฏ:**
```python
# ูู main.py
def get_current_user(token: str = Depends(oauth2_scheme), db: Session = Depends(get_db)):
    try:
        payload = jwt.decode(token, SECRET_KEY, algorithms=[ALGORITHM])
        user_id: int = int(payload.get("sub"))
        user = db.query(User).filter(User.id == user_id).first()
        if user is None:
            raise HTTPException(status_code=401, detail="ูุณุชุฎุฏู ุบูุฑ ููุฌูุฏ")
        return user
    except JWTError:
        raise HTTPException(status_code=401, detail="Token ุบูุฑ ุตุญูุญ")
```

### ุชุดููุฑ ูููุงุช ุงููุฑูุฑ

#### bcrypt

ูุณุชุฎุฏู **bcrypt** ูุชุดููุฑ ูููุงุช ุงููุฑูุฑ ูุจู ุญูุธูุง ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช.

**ุงูููุฏ:**
```python
# ุชุดููุฑ ูููุฉ ุงููุฑูุฑ
def get_password_hash(password: str) -> str:
    return bcrypt.hashpw(password.encode('utf-8'), bcrypt.gensalt()).decode('utf-8')

# ุงูุชุญูู ูู ูููุฉ ุงููุฑูุฑ
def verify_password(plain_password: str, hashed_password: str) -> bool:
    return bcrypt.checkpw(
        plain_password.encode('utf-8'),
        hashed_password.encode('utf-8')
    )
```

**ูุซุงู:**
```
ูููุฉ ุงููุฑูุฑ ุงูุฃุตููุฉ: "mypassword123"
    โ
ุจุนุฏ ุงูุชุดููุฑ: "$2b$12$LQv3c1yqBWVHxkd0LHAkCOYz6TtxMQJqhN8/LewY5GyY..."
    โ
ูุชู ุญูุธ ุงููุณุฎุฉ ุงููุดูุฑุฉ ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช
    โ
ุนูุฏ ุชุณุฌูู ุงูุฏุฎููุ ููุงุฑู ูููุฉ ุงููุฑูุฑ ุงููุฏุฎูุฉ ูุน ุงููุดูุฑุฉ
```

---

## ๐ฉบ ุขููุฉ ููุงุณ ุถุบุท ุงูุฏู ูู ุงูุตูุฑ

### ุงูุฃุณุงุณ ุงูุนููู: Photoplethysmography (PPG)

#### ูุง ูู PPGุ

**Photoplethysmography (PPG)** ูู ุชูููุฉ ุนูููุฉ ูููุงุณ ุงูุชุบูุฑุงุช ูู ุญุฌู ุงูุฏู ูู ุฎูุงู ุงูุถูุก.

#### ููู ูุนููุ

```
1. ุงูููุจ ููุจุถ
    โ
2. ุงูุฏู ูุชุฏูู ูู ุงูุฃูุนูุฉ ุงูุฏูููุฉ
    โ
3. ุญุฌู ุงูุฏู ูู ุงูุฃูุนูุฉ ูุชุบูุฑ ูุน ูู ูุจุถุฉ
    โ
4. ูุฐุง ุงูุชุบูุฑ ูุคุซุฑ ุนูู ูููุฉ ุงูุถูุก ุงูููุนูุณ ูู ุงูุฌูุฏ
    โ
5. ุงููุงููุฑุง ุชุณุฌู ูุฐู ุงูุชุบูุฑุงุช ูู ููู ุงูุฌูุฏ
    โ
6. ุงููููุฐุฌ ูุญูู ูุฐู ุงูุชุบูุฑุงุช
    โ
7. ุงููููุฐุฌ ูุณุชูุชุฌ ุถุบุท ุงูุฏู
```

### ุงูุขููุฉ ุงูุชูููุฉ: CNN + Transfer Learning

#### 1. ูุนุงูุฌุฉ ุงูุตูุฑุฉ

**ุงูููุฏ:**
```python
# ูู blood_pressure_model.py
def preprocess_image(self, image_path):
    # 1. ูุฑุงุกุฉ ุงูุตูุฑุฉ
    img = cv2.imread(image_path)
    
    # 2. ุชุบููุฑ ุงูุญุฌู ุฅูู 224x224 (ุญุฌู VGG16)
    img = cv2.resize(img, (224, 224))
    
    # 3. ุชุญููู BGR ุฅูู RGB
    img = cv2.cvtColor(img, cv2.COLOR_BGR2RGB)
    
    # 4. ุชุทุจูุน ุงูููู (0-255 โ 0-1)
    img = img.astype(np.float32) / 255.0
    
    # 5. ุฅุถุงูุฉ ุจูุนุฏ ููู batch
    img = np.expand_dims(img, axis=0)
    
    return img
```

**ุงูุฎุทูุงุช:**
1. **ูุฑุงุกุฉ ุงูุตูุฑุฉ**: ูู ุงูููู
2. **ุชุบููุฑ ุงูุญุฌู**: ุฅูู 224x224 ุจูุณู (ุญุฌู VGG16)
3. **ุชุญููู ุงูุฃููุงู**: ูู BGR (OpenCV) ุฅูู RGB (TensorFlow)
4. **ุงูุชุทุจูุน**: ุชุญููู ุงูููู ูู 0-255 ุฅูู 0-1
5. **ุฅุถุงูุฉ ุจูุนุฏ**: ูุฅุฑุณุงููุง ูู batch ูููููุฐุฌ

#### 2. ุงุณุชุฎุฑุงุฌ ุงูููุฒุงุช (VGG16)

**VGG16** ูู ูููุฐุฌ CNN ูุฏุฑุจ ูุณุจูุงู ุนูู ููููู ุตูุฑุฉ ูู ImageNet.

**ุงูุจููุฉ:**
```
ุงูุตูุฑุฉ (224x224x3)
    โ
[13 ุทุจูุฉ Convolutional]
  - Conv2D: ุงุณุชุฎุฑุงุฌ ุงูููุฒุงุช
  - MaxPooling: ุชูููู ุงูุญุฌู
    โ
Feature Maps (7x7x512)
    โ
Global Average Pooling
    โ
Vector (512)
```

**ุงูููุฏ:**
```python
# ูู blood_pressure_model.py
base_model = VGG16(
    weights='imagenet',      # ุฃูุฒุงู ูุฏุฑุจุฉ ูุณุจูุงู
    include_top=False,       # ุจุฏูู ุงูุทุจูุงุช ุงูุฃุฎูุฑุฉ
    input_shape=(224, 224, 3)
)

# ุชุฌููุฏ ุงูุทุจูุงุช (ูุง ูุนุฏููุง ุฃุซูุงุก ุงูุชุฏุฑูุจ)
base_model.trainable = False

# ุงุณุชุฎุฏุงู VGG16 ูุงุณุชุฎุฑุงุฌ ุงูููุฒุงุช
x = base_model(inputs, training=False)
x = layers.GlobalAveragePooling2D()(x)  # (7x7x512) โ (512)
```

**ูุง ุชุณุชุฎุฑุฌู ุงูุทุจูุงุช:**
- **ุงูุทุจูุงุช ุงูุฃููู**: ุญูุงูุ ุฃููุงู ุฃุณุงุณูุฉ
- **ุงูุทุจูุงุช ุงููุณุทู**: ุฃููุงุท ูุนูุฏุฉุ ุฃุดูุงู
- **ุงูุทุจูุงุช ุงููุชูุฏูุฉ**: ุฃููุงุท ูุฑุชุจุทุฉ ุจุถุบุท ุงูุฏู

#### 3. ุงูุชูุจุค ุจุถุบุท ุงูุฏู

**ุงูุจููุฉ ุงููุงููุฉ:**
```
Vector (512) ูู VGG16
    โ
Dense(512) + ReLU + Dropout(0.5)
    โ
Dense(256) + ReLU + Dropout(0.3)
    โ
Dense(2) + Linear
    โ
[Systolic, Diastolic]
```

**ุงูููุฏ:**
```python
# ูู blood_pressure_model.py
x = layers.Dense(512, activation='relu')(x)
x = layers.Dropout(0.5)(x)  # ููุน Overfitting
x = layers.Dense(256, activation='relu')(x)
x = layers.Dropout(0.3)(x)
outputs = layers.Dense(2, activation='linear')(x)  # Systolic, Diastolic
```

**ุงูุชูุจุค:**
```python
# ูู blood_pressure_model.py
prediction = self.model.predict(processed_img, verbose=0)
systolic = float(prediction[0][0])
diastolic = float(prediction[0][1])

# ุงูุชุฃูุฏ ูู ุงูููู ุงููุนูููุฉ
systolic = max(90, min(180, systolic))
diastolic = max(60, min(120, diastolic))
```

### ุงูููุฒุงุช ุงูุชู ูุณุชุฎุฑุฌูุง ุงููููุฐุฌ

#### ุฃ) ููุฒุงุช ุจุตุฑูุฉ ูุจุงุดุฑุฉ:
- **ููู ุงูุฌูุฏ**: ุงูุชุบูุฑุงุช ุงููุฑุชุจุทุฉ ุจุงูุฏูุฑุฉ ุงูุฏูููุฉ
- **ุงูุชุจุงูู**: ุงูุงุฎุชูุงูุงุช ูู ุงูุฅุถุงุกุฉ ูุงูุธูุงู
- **ุงููููุณ**: ุฎุตุงุฆุต ุณุทุญ ุงูุฌูุฏ

#### ุจ) ููุฒุงุช ูุณุชุฎุฑุฌุฉ ูู ุงูุชุฏุฑูุจ:
- **ุงูุฃููุงุท ุงููุฑุชุจุทุฉ ุจุถุบุท ุงูุฏู ุงููุฑุชูุน**
- **ุงูุฃููุงุท ุงููุฑุชุจุทุฉ ุจุถุบุท ุงูุฏู ุงูุทุจูุนู**
- **ุงูุฃููุงุท ุงููุฑุชุจุทุฉ ุจุถุบุท ุงูุฏู ุงูููุฎูุถ**

#### ุฌ) ุงูุนูุงูุงุช ุงููุนูุฏุฉ:
- ุงููููุฐุฌ ูุชุนูู ุนูุงูุงุช ุบูุฑ ูุจุงุดุฑุฉ ุจูู ุงูููุฒุงุช ุงูุจุตุฑูุฉ ูุถุบุท ุงูุฏู
- ูุฐู ุงูุนูุงูุงุช ูุตุนุจ ูุตููุง ูุฏููุงูุ ููู ุงููููุฐุฌ ูุชุนูููุง ูู ุงูุจูุงูุงุช

---

## ๐ ูุธุงู ุฌูุน ุงูุจูุงูุงุช ููุชุฏุฑูุจ

### ููุงุฐุง ูุญุชุงุฌ ุจูุงูุงุช ุงูุชุฏุฑูุจุ

ุงููููุฐุฌ ูุญุชุงุฌ **ุจูุงูุงุช ุญููููุฉ** ููุชุนูู:
- **ุงูุตูุฑ**: ุตูุฑ ุฃูุฏู ุงููุณุชุฎุฏููู
- **ุงูููู ุงูุญููููุฉ**: ููุงุณุงุช ุถุบุท ุงูุฏู ูู ุฃุฌูุฒุฉ ุทุจูุฉ ูุนุชูุฏุฉ

### ููู ูุชู ุฌูุน ุงูุจูุงูุงุชุ

#### ุงูุชุฏูู ุงูุชููุงุฆู ูู ุงูุชุทุจูู:

```
ุงููุณุชุฎุฏู ูููุณ ุถุบุท ุงูุฏู
    โ
ุงููููุฐุฌ ูุนุทู ูุชุงุฆุฌ ุชุฌุฑูุจูุฉ
    โ
ุงูุชุทุจูู ูุณุฃู ุงููุณุชุฎุฏู:
"ูู ุชุฑูุฏ ุฅุฏุฎุงู ุงููููุฉ ุงูุญููููุฉ ูู ุฌูุงุฒู ุงูุทุจูุ"
    โ
ุงููุณุชุฎุฏู ูุฏุฎู ุงูููู ุงูุญููููุฉ:
  - Systolic: 125
  - Diastolic: 82
    โ
ุงูุชุทุจูู ูุญูุธ:
  - ุงูุตูุฑุฉ
  - Systolic ุงูุญูููู
  - Diastolic ุงูุญูููู
    โ
ุงูุจูุงูุงุช ุชูุญูุธ ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช (training_data)
```

**ุงูููุฏ ูู Flutter:**
```dart
// ูู home_screen.dart
void _showTrainingDataDialog() {
  showDialog(
    context: context,
    builder: (context) => AlertDialog(
      title: Text('ุฅุฏุฎุงู ุงููููุฉ ุงูุญููููุฉ'),
      content: Column(
        children: [
          TextField(controller: _systolicController),
          TextField(controller: _diastolicController),
        ],
      ),
      actions: [
        ElevatedButton(
          onPressed: () async {
            await _saveTrainingData(
              _lastProcessedImage!,
              int.parse(_systolicController.text),
              int.parse(_diastolicController.text),
            );
          },
          child: Text('ุญูุธ'),
        ),
      ],
    ),
  );
}
```

**ุงูููุฏ ูู Backend:**
```python
# ูู main.py
@app.post("/api/training-data")
async def save_training_data(
    image: UploadFile,
    systolic: int = Form(...),
    diastolic: int = Form(...),
    current_user: User = Depends(get_current_user),
):
    # ุญูุธ ุงูุตูุฑุฉ
    file_path = UPLOAD_DIR / f"training_{current_user.id}_{timestamp}.jpg"
    with open(file_path, "wb") as buffer:
        shutil.copyfileobj(image.file, buffer)
    
    # ุญูุธ ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช
    training_data = TrainingData(
        user_id=current_user.id,
        image_path=str(file_path),
        systolic=systolic,
        diastolic=diastolic,
        is_verified=True,
    )
    db.add(training_data)
    db.commit()
    
    return {"message": "ุชู ุญูุธ ุงูุจูุงูุงุช ุจูุฌุงุญ"}
```

### ูููู ูุงุนุฏุฉ ุงูุจูุงูุงุช

```sql
CREATE TABLE training_data (
    id INT PRIMARY KEY AUTO_INCREMENT,
    user_id INT,
    image_path VARCHAR(255),
    systolic INT,
    diastolic INT,
    is_verified BOOLEAN DEFAULT TRUE,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    FOREIGN KEY (user_id) REFERENCES users(id)
);
```

### ุชุตุฏูุฑ ุงูุจูุงูุงุช ููุชุฏุฑูุจ

**ุงูุณูุฑูุจุช:** `export_training_data.py`

**ูุง ููุนูู:**
1. **ุฌูุจ ุงูุจูุงูุงุช ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช:**
   ```python
   SELECT * FROM training_data WHERE is_verified = 1
   ```

2. **ูุณุฎ ุงูุตูุฑ:**
   ```python
   # ูุณุฎ ูู ุตูุฑุฉ ุฅูู:
   backend/data/train/images/training_00001.jpg
   backend/data/train/images/training_00002.jpg
   ...
   ```

3. **ุฅูุดุงุก ููู CSV:**
   ```csv
   image_name,systolic,diastolic
   training_00001.jpg,120,80
   training_00002.jpg,130,85
   ...
   ```

**ุงูููุฏ:**
```python
# ูู export_training_data.py
def export_training_data():
    # ุฌูุจ ุงูุจูุงูุงุช
    training_data = db.query(TrainingData).filter(
        TrainingData.is_verified == True
    ).all()
    
    # ุฅูุดุงุก ูุฌูุฏ ุงูุตูุฑ
    images_dir = Path("data/train/images")
    images_dir.mkdir(parents=True, exist_ok=True)
    
    # ูุณุฎ ุงูุตูุฑ ูุฅูุดุงุก CSV
    rows = []
    for idx, data in enumerate(training_data):
        # ูุณุฎ ุงูุตูุฑุฉ
        src = Path(data.image_path)
        dst = images_dir / f"training_{idx:05d}.jpg"
        shutil.copy(src, dst)
        
        # ุฅุถุงูุฉ ุฅูู CSV
        rows.append({
            'image_name': dst.name,
            'systolic': data.systolic,
            'diastolic': data.diastolic,
        })
    
    # ุญูุธ CSV
    df = pd.DataFrame(rows)
    df.to_csv("data/train/labels.csv", index=False)
```

---

## ๐ ุขููุฉ ุชุฏุฑูุจ ุงููููุฐุฌ ุจุงูุชูุตูู

### ูุธุฑุฉ ุนุงูุฉ

ุงูุชุฏุฑูุจ ูู ุนูููุฉ ุชุนููู ุงููููุฐุฌ ุนูู ุฑุจุท ุงูุตูุฑ ุจููู ุถุบุท ุงูุฏู ุงูุญููููุฉ.

### ุงูุฎุทูุงุช ุงููุงููุฉ

#### ุงูุฎุทูุฉ 1: ุฅุนุฏุงุฏ ุงูุจูุงูุงุช

**ุงููุทููุจ:**
```
backend/data/train/
โโโ images/
โ   โโโ training_00001.jpg
โ   โโโ training_00002.jpg
โ   โโโ ...
โโโ labels.csv
    image_name,systolic,diastolic
    training_00001.jpg,120,80
    training_00002.jpg,130,85
    ...
```

**ุงูููุฏ:**
```python
# ูู train_model.py
labels_df = pd.read_csv("data/train/labels.csv")
print(f"โ ุชู ุงูุนุซูุฑ ุนูู {len(labels_df)} ุตูุฑุฉ")
```

#### ุงูุฎุทูุฉ 2: ุชูุณูู ุงูุจูุงูุงุช

**ุงูุชูุณูู:**
- **80%**: ุจูุงูุงุช ุงูุชุฏุฑูุจ (Training)
- **20%**: ุจูุงูุงุช ุงูุชุญูู (Validation)

**ุงูููุฏ:**
```python
# ูู train_model.py
datagen = ImageDataGenerator(
    rescale=1./255,
    validation_split=0.2,  # 20% ููุชุญูู
    rotation_range=20,     # ุชุฏููุฑ ุงูุตูุฑ
    width_shift_range=0.2,  # ุฅุฒุงุญุฉ ุฃูููุฉ
    height_shift_range=0.2, # ุฅุฒุงุญุฉ ุนููุฏูุฉ
    horizontal_flip=True,   # ููุจ ุฃููู
)

train_generator = datagen.flow_from_dataframe(
    labels_df,
    directory="data/train/images",
    x_col='image_name',
    y_col=['systolic', 'diastolic'],
    target_size=(224, 224),
    batch_size=32,
    class_mode='raw',
    subset='training'  # 80%
)

validation_generator = datagen.flow_from_dataframe(
    labels_df,
    directory="data/train/images",
    x_col='image_name',
    y_col=['systolic', 'diastolic'],
    target_size=(224, 224),
    batch_size=32,
    class_mode='raw',
    subset='validation'  # 20%
)
```

#### ุงูุฎุทูุฉ 3: ุจูุงุก ุงููููุฐุฌ

**ุงูููุฏ:**
```python
# ูู blood_pressure_model.py
def build_model(self):
    # ุงุณุชุฎุฏุงู VGG16
    base_model = VGG16(
        weights='imagenet',
        include_top=False,
        input_shape=(224, 224, 3)
    )
    base_model.trainable = False  # ุชุฌููุฏ
    
    # ุฅุถุงูุฉ ุทุจูุงุชูุง
    inputs = keras.Input(shape=(224, 224, 3))
    x = base_model(inputs, training=False)
    x = layers.GlobalAveragePooling2D()(x)
    x = layers.Dense(512, activation='relu')(x)
    x = layers.Dropout(0.5)(x)
    x = layers.Dense(256, activation='relu')(x)
    x = layers.Dropout(0.3)(x)
    outputs = layers.Dense(2, activation='linear')(x)
    
    model = Model(inputs, outputs)
    
    # ุชุฌููุน ุงููููุฐุฌ
    model.compile(
        optimizer=Adam(learning_rate=0.001),
        loss='mse',  # Mean Squared Error
        metrics=['mae']  # Mean Absolute Error
    )
    
    return model
```

#### ุงูุฎุทูุฉ 4: ุงูุชุฏุฑูุจ

**ุงูููุฏ:**
```python
# ูู blood_pressure_model.py
history = self.model.fit(
    train_generator,
    epochs=50,  # ุนุฏุฏ ุงูุฏูุฑุงุช
    validation_data=validation_generator,
    verbose=1
)
```

**ูุง ูุญุฏุซ ุฃุซูุงุก ุงูุชุฏุฑูุจ:**

```
ูููุชุฑุถ ุฃู ูุฏููุง ุตูุฑุฉ ูุงุญุฏุฉ:
  - ุงูุตูุฑุฉ: training_00001.jpg
  - ุงููููุฉ ุงูุญููููุฉ: Systolic=120, Diastolic=80

1. ุงููููุฐุฌ ูุญูู ุงูุตูุฑุฉ
    โ
2. ุงููููุฐุฌ ูุฎุฑุฌ ุชูุจุค: Systolic=115, Diastolic=75
    โ
3. ูุญุณุจ ุงูุฎุทุฃ:
   Loss = (120-115)ยฒ + (80-75)ยฒ = 25 + 25 = 50
    โ
4. ูุนุฏู ุงูุฃูุฒุงู ูุชูููู ุงูุฎุทุฃ
   (Backpropagation)
    โ
5. ููุฑุฑ ุงูุนูููุฉ ุนูู ุฌููุน ุงูุตูุฑ
    โ
6. ุจุนุฏ ูู Epochุ ูุฎุชุจุฑ ุนูู ุจูุงูุงุช ุงูุชุญูู
    โ
7. ูุณุชูุฑ ุญุชู ููู ุงูุฎุทุฃ
```

#### ุงูุฎุทูุฉ 5: ุญูุธ ุงููููุฐุฌ

**ุงูููุฏ:**
```python
# ูู blood_pressure_model.py
self.model.save("models/blood_pressure_model.h5")
print("โ ุชู ุญูุธ ุงููููุฐุฌ")
```

### Data Augmentation (ุฒูุงุฏุฉ ุงูุจูุงูุงุช)

**ูุง ููุ**
ุชูููุงุช ูุฒูุงุฏุฉ ุนุฏุฏ ุงูุตูุฑ ุจุฏูู ุงูุญุงุฌุฉ ูุงูุชูุงุท ุตูุฑ ุฌุฏูุฏุฉ.

**ุงูุชูููุงุช ุงููุณุชุฎุฏูุฉ:**
- **Rotation**: ุชุฏููุฑ ุงูุตูุฑุฉ (ยฑ20 ุฏุฑุฌุฉ)
- **Shift**: ุฅุฒุงุญุฉ ุงูุตูุฑุฉ (ยฑ20%)
- **Flip**: ููุจ ุงูุตูุฑุฉ ุฃูููุงู

**ุงููุงุฆุฏุฉ:**
- ุฒูุงุฏุฉ ุนุฏุฏ ุงูุจูุงูุงุช
- ุชุญุณูู ุงูุชุนููู (Generalization)
- ุชูููู Overfitting

### ุชูููู ุงูุฃุฏุงุก

**ุงูููุงููุณ ุงููุณุชุฎุฏูุฉ:**

1. **MAE (Mean Absolute Error)**:
   ```
   MAE = ูุชูุณุท |ุงููููุฉ ุงูุญููููุฉ - ุงููููุฉ ุงููุชููุนุฉ|
   ```
   - ูููุง ููุ ูุงู ุฃูุถู
   - ูุซุงู: MAE = 5 ูุนูู ูุชูุณุท ุงูุฎุทุฃ 5 mmHg

2. **MSE (Mean Squared Error)**:
   ```
   MSE = ูุชูุณุท (ุงููููุฉ ุงูุญููููุฉ - ุงููููุฉ ุงููุชููุนุฉ)ยฒ
   ```
   - ูุนุทู ูุฒู ุฃูุจุฑ ููุฃุฎุทุงุก ุงููุจูุฑุฉ

**ุงููุฏู:**
- **MAE < 5 mmHg**: ุฏูุฉ ุฌูุฏุฉ ุฌุฏุงู
- **MAE < 10 mmHg**: ุฏูุฉ ููุจููุฉ
- **MAE > 10 mmHg**: ูุญุชุงุฌ ุชุญุณูู

---

## ๐ง ุงูุจููุฉ ุงูุชูููุฉ ูููููุฐุฌ (CNN)

### ูุง ูู CNNุ

**CNN (Convolutional Neural Network)** ูู ููุน ูู ุงูุดุจูุงุช ุงูุนุตุจูุฉ ูุตูู ุฎุตูุตุงู ููุนุงูุฌุฉ ุงูุตูุฑ.

### ุงูุจููุฉ ุงููุงููุฉ

```
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ         Input Image (224x224x3)            โ
โ  (ุตูุฑุฉ ูุฏ ุงููุณุชุฎุฏู)                        โ
โโโโโโโโโโโโโโโโโโโโฌโโโโโโโโโโโโโโโโโโโโโโโโโโโ
                   โ
                   โผ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ         VGG16 Base Model                    โ
โ  (13 ุทุจูุฉ Convolutional - ูุฌูุฏุฉ)          โ
โ                                             โ
โ  Block 1:                                   โ
โ    Conv2D(64) โ Conv2D(64) โ MaxPooling    โ
โ                                             โ
โ  Block 2:                                   โ
โ    Conv2D(128) โ Conv2D(128) โ MaxPooling  โ
โ                                             โ
โ  Block 3:                                   โ
โ    Conv2D(256) โ Conv2D(256) โ MaxPooling  โ
โ                                             โ
โ  Block 4:                                   โ
โ    Conv2D(512) โ Conv2D(512) โ MaxPooling  โ
โ                                             โ
โ  Block 5:                                   โ
โ    Conv2D(512) โ Conv2D(512) โ MaxPooling  โ
โโโโโโโโโโโโโโโโโโโโฌโโโโโโโโโโโโโโโโโโโโโโโโโโโ
                   โ
                   โผ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ      Feature Maps (7x7x512)                 โ
โ  (ููุฒุงุช ูุณุชุฎุฑุฌุฉ ูู ุงูุตูุฑุฉ)                โ
โโโโโโโโโโโโโโโโโโโโฌโโโโโโโโโโโโโโโโโโโโโโโโโโโ
                   โ
                   โผ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ      Global Average Pooling                 โ
โ      (7x7x512) โ (512)                     โ
โ  (ุชุญููู ุงูููุฒุงุช ุฅูู ูุชุฌู)                   โ
โโโโโโโโโโโโโโโโโโโโฌโโโโโโโโโโโโโโโโโโโโโโโโโโโ
                   โ
                   โผ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ      Dense Layer (512)                      โ
โ      + ReLU Activation                      โ
โ      + Dropout (0.5)                        โ
โ  (ูุนุงูุฌุฉ ุงูููุฒุงุช)                           โ
โโโโโโโโโโโโโโโโโโโโฌโโโโโโโโโโโโโโโโโโโโโโโโโโโ
                   โ
                   โผ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ      Dense Layer (256)                      โ
โ      + ReLU Activation                      โ
โ      + Dropout (0.3)                        โ
โ  (ูุนุงูุฌุฉ ุฅุถุงููุฉ)                            โ
โโโโโโโโโโโโโโโโโโโโฌโโโโโโโโโโโโโโโโโโโโโโโโโโโ
                   โ
                   โผ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ      Output Layer (2)                       โ
โ      + Linear Activation                    โ
โ  - Systolic (mmHg)                         โ
โ  - Diastolic (mmHg)                        โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
```

### ุดุฑุญ ุงูุทุจูุงุช

#### 1. ุทุจูุงุช Convolutional (VGG16)

**ุงููุธููุฉ:** ุงุณุชุฎุฑุงุฌ ุงูููุฒุงุช ูู ุงูุตูุฑุฉ

**ููู ุชุนูู:**
```
Filter (3x3) ูุชุญุฑู ุนูู ุงูุตูุฑุฉ
    โ
ูุญุณุจ ูุฌููุน ูุฑุฌุญ ููู ููุทูุฉ
    โ
ููุชุฌ Feature Map ุฌุฏูุฏ
```

**ูุซุงู:**
```
ุงูุตูุฑุฉ ุงูุฃุตููุฉ (224x224)
    โ
[Conv2D(64)] โ Feature Map (224x224x64)
    โ
[MaxPooling] โ Feature Map (112x112x64)
    โ
[Conv2D(128)] โ Feature Map (112x112x128)
    โ
...
```

#### 2. Global Average Pooling

**ุงููุธููุฉ:** ุชุญููู Feature Maps ุฅูู ูุชุฌู

**ุงูููุฏ:**
```python
# (7x7x512) โ (512)
x = layers.GlobalAveragePooling2D()(x)
```

**ูุซุงู:**
```
Input: (7x7x512) = 25,088 ูููุฉ
    โ
ูุฃุฎุฐ ุงููุชูุณุท ููู ููุงุฉ (512 ููุงุฉ)
    โ
Output: (512) = 512 ูููุฉ
```

#### 3. ุทุจูุงุช Dense (Fully Connected)

**ุงููุธููุฉ:** ุฑุจุท ุงูููุฒุงุช ุจุงููุชูุฌุฉ ุงูููุงุฆูุฉ

**ุงูููุฏ:**
```python
# 512 โ 512
x = layers.Dense(512, activation='relu')(x)
x = layers.Dropout(0.5)(x)  # ููุน Overfitting

# 512 โ 256
x = layers.Dense(256, activation='relu')(x)
x = layers.Dropout(0.3)(x)

# 256 โ 2
outputs = layers.Dense(2, activation='linear')(x)
```

**ReLU Activation:**
```
f(x) = max(0, x)
```
- ุฅุฐุง ูุงูุช ุงููููุฉ ุณุงูุจุฉ โ 0
- ุฅุฐุง ูุงูุช ุงููููุฉ ููุฌุจุฉ โ ููุณ ุงููููุฉ

**Dropout:**
- ุฃุซูุงุก ุงูุชุฏุฑูุจุ ูุนุทู ุนุดูุงุฆูุงู 50% ูู ุงูุนูุฏ
- ูููุน Overfitting (ุงูุญูุธ ุจุฏูุงู ูู ุงูุชุนูู)

#### 4. ุทุจูุฉ ุงูุฅุฎุฑุงุฌ

**ุงูููุฏ:**
```python
outputs = layers.Dense(2, activation='linear')(x)
```

**ุงููุชูุฌุฉ:**
```
[Systolic, Diastolic]
ูุซุงู: [120.5, 80.3]
```

### Transfer Learning

#### ูุง ูู Transfer Learningุ

ุงุณุชุฎุฏุงู ูููุฐุฌ ูุฏุฑุจ ูุณุจูุงู (VGG16) ููุงุนุฏุฉุ ุซู ุฅุถุงูุฉ ุทุจูุงุชูุง ุงูุฎุงุตุฉ.

#### ููุงุฐุง ูุณุชุฎุฏููุ

1. **ุณุฑุนุฉ ุงูุชุฏุฑูุจ**: ูุง ูุญุชุงุฌ ุชุฏุฑูุจ ูู ุงูุตูุฑ
2. **ุฏูุฉ ุฃูุถู**: VGG16 ูุฏุฑุจ ุนูู ููููู ุตูุฑุฉ
3. **ุจูุงูุงุช ุฃูู**: ูุญุชุงุฌ ุจูุงูุงุช ุฃูู ููุชุฏุฑูุจ

#### ููู ูุนููุ

```
VGG16 (ูุฏุฑุจ ุนูู ImageNet)
    โ
ูุณุชุฎุฏูู ูุงุณุชุฎุฑุงุฌ ุงูููุฒุงุช
    โ
ูุถูู ุทุจูุงุชูุง ุงูุฎุงุตุฉ
    โ
ูุฏุฑุจ ููุท ุงูุทุจูุงุช ุงูุฌุฏูุฏุฉ
    โ
ุงููุชูุฌุฉ: ูููุฐุฌ ูุฏุฑุจ ุจุณุฑุนุฉ ูุฏูุฉ
```

---

## ๐ฑ ููููุฉ ุงุณุชุฎุฏุงู ุงูุชุทุจูู

### ูููุณุชุฎุฏู ุงูููุงุฆู

#### 1. ุชุซุจูุช ุงูุชุทุจูู

```
1. ูุชุญ Flutter App
2. ุชุดุบูู: flutter run
```

#### 2. ุฅูุดุงุก ุญุณุงุจ

```
1. ูุชุญ ุงูุชุทุจูู
2. ุงูุถุบุท ุนูู "ุฅูุดุงุก ุญุณุงุจ ุฌุฏูุฏ"
3. ุฅุฏุฎุงู:
   - ุงูุงุณู
   - ุงูุจุฑูุฏ ุงูุฅููุชุฑููู
   - ูููุฉ ุงููุฑูุฑ
4. ุงูุถุบุท ุนูู "ุชุณุฌูู"
```

#### 3. ููุงุณ ุถุบุท ุงูุฏู

```
1. ุชุณุฌูู ุงูุฏุฎูู
2. ุงูุถุบุท ุนูู "ููุงุณ ุถุบุท ุงูุฏู"
3. ูุถุน ุงููุฏ ุนูู ุงููุงููุฑุง
4. ุงูุถุบุท ุนูู "ุงูุชูุงุท ุตูุฑุฉ"
5. ุงูุชุธุงุฑ ุงููุชุงุฆุฌ
6. (ุงุฎุชูุงุฑู) ุฅุฏุฎุงู ุงููููุฉ ุงูุญููููุฉ ูู ุงูุฌูุงุฒ ุงูุทุจู
```

#### 4. ุนุฑุถ ุงูุชุงุฑูุฎ

```
1. ุงูุถุบุท ุนูู "ุณุฌู ุงูููุงุณุงุช"
2. ุนุฑุถ ุฌููุน ุงูููุงุณุงุช ุงูุณุงุจูุฉ
```

### ูููุทูุฑ

#### 1. ุชุดุบูู Backend

```bash
cd backend
pip install -r requirements.txt
uvicorn main:app --reload --host 0.0.0.0 --port 8000
```

#### 2. ุชุดุบูู Flutter App

```bash
cd blood_pressure_app
flutter pub get
flutter run
```

#### 3. ุชุฏุฑูุจ ุงููููุฐุฌ

```bash
cd backend
python export_training_data.py  # ุชุตุฏูุฑ ุงูุจูุงูุงุช
python train_model.py            # ุชุฏุฑูุจ ุงููููุฐุฌ
```

---

## โ๏ธ ุงูููุฒุงุช ุงูุชูููุฉ

### Frontend (Flutter)

- โ **State Management**: Provider
- โ **HTTP Client**: http package
- โ **Local Storage**: SharedPreferences
- โ **Camera**: camera package
- โ **Image Processing**: image package
- โ **UI**: Material Design 3
- โ **Fonts**: Google Fonts (Cairo)

### Backend (Python)

- โ **API Framework**: FastAPI
- โ **Database ORM**: SQLAlchemy
- โ **Authentication**: JWT
- โ **Password Hashing**: bcrypt
- โ **Image Processing**: OpenCV
- โ **AI/ML**: TensorFlow/Keras
- โ **CORS**: ููุณูุงุญ ุจุงูุทูุจุงุช ูู Flutter

### Database (MySQL)

- โ **Tables**: users, measurements, training_data
- โ **Relations**: Foreign Keys
- โ **Indexes**: ููุฃุฏุงุก
- โ **Timestamps**: created_at

### AI/ML

- โ **Transfer Learning**: VGG16
- โ **CNN**: Convolutional Neural Network
- โ **Data Augmentation**: ุฒูุงุฏุฉ ุงูุจูุงูุงุช
- โ **Model Saving**: ุญูุธ ุงููููุฐุฌ ุงููุฏุฑุจ

---

## โ๏ธ ุงูุชุญุฐูุฑุงุช ุงููููุฉ

### 1. ุงููููุฐุฌ ุงูุญุงูู

**โ๏ธ ุงููููุฐุฌ ุงูุญุงูู ูุญุชุงุฌ ุชุฏุฑูุจ ุนูู ุจูุงูุงุช ุญููููุฉ**

- ุฅุฐุง ูู ูุชู ุชุฏุฑูุจู ุจุนุฏุ ุงููุชุงุฆุฌ **ุชุฌุฑูุจูุฉ ููุท**
- ูุง ูููู ุงูุงุนุชูุงุฏ ุนูู ุงููุชุงุฆุฌ ูุฃุบุฑุงุถ ุทุจูุฉ ุญููููุฉ
- ูุญุชุงุฌ **50+ ุตูุฑุฉ ุนูู ุงูุฃูู** ููุชุฏุฑูุจ ุงูุฃุณุงุณู
- **200+ ุตูุฑุฉ ููุตู ุจู** ูุฏูุฉ ุฃูุถู

### 2. ุงูุฏูุฉ ุงูุทุจูุฉ

**โ๏ธ ุงููุชุงุฆุฌ ููุณุช ุจุฏููุงู ุนู ุงูุฃุฌูุฒุฉ ุงูุทุจูุฉ ุงููุนุชูุฏุฉ**

- ุงููุชุงุฆุฌ **ุชูุฑูุจูุฉ** ูููุณุช ุฏูููุฉ 100%
- ูุฌุจ ูุฑุงุฌุนุฉ ุงูุทุจูุจ ููุญุตูู ุนูู ููุงุณุงุช ุฏูููุฉ
- ูุง ุชุณุชุฎุฏู ุงููุชุงุฆุฌ ูุงุชุฎุงุฐ ูุฑุงุฑุงุช ุทุจูุฉ ูููุฉ

### 3. ุงูุฃูุงู

**โ๏ธ ูู ุงูุฅูุชุงุฌุ ูุฌุจ:**

- ุชุบููุฑ `SECRET_KEY` ูู `backend/main.py`
- ุชุญุฏูุซ `CORS origins` ูู `backend/main.py`
- ุงุณุชุฎุฏุงู HTTPS
- ุชุดููุฑ ูุงุนุฏุฉ ุงูุจูุงูุงุช
- ุญูุงูุฉ ุงูุตูุฑ ูู ุงููุตูู ุบูุฑ ุงููุตุฑุญ

### 4. ุงูุฃุฏุงุก

**โ๏ธ ุงูุฃุฏุงุก ูุนุชูุฏ ุนูู:**

- ุฌูุฏุฉ ุงูุตูุฑุฉ (ุฅุถุงุกุฉุ ูุถูุญ)
- ุฌูุฏุฉ ุงูุจูุงูุงุช ุงููุฏุฑุจุฉ
- ุนุฏุฏ ุงูุตูุฑ ุงููุฏุฑุจุฉ
- ููุฉ ุงูุฌูุงุฒ (ููุชุทุจูู)

---

## ๐ ุงูุฎูุงุตุฉ

### ูุง ุชุนูููุงู

1. **ุงูุจููุฉ ุงูุชูููุฉ**: Flutter + FastAPI + MySQL
2. **ุขููุฉ ุงูุนูู**: ูู ุงูุชุณุฌูู ุฅูู ุงูููุงุณ
3. **ุงููุตุงุฏูุฉ**: JWT + bcrypt
4. **ููุงุณ ุถุบุท ุงูุฏู**: PPG + CNN + VGG16
5. **ุฌูุน ุงูุจูุงูุงุช**: ูุธุงู ุชููุงุฆู ูู ุงูุชุทุจูู
6. **ุงูุชุฏุฑูุจ**: Transfer Learning + Data Augmentation

### ุงูุฎุทูุงุช ุงูุชุงููุฉ

1. **ุฌูุน ุงูุจูุงูุงุช**: ุฌูุน 200+ ุตูุฑุฉ ูุน ููุงุณุงุช ุญููููุฉ
2. **ุชุฏุฑูุจ ุงููููุฐุฌ**: ุงุณุชุฎุฏุงู `train_model.py`
3. **ุชุญุณูู ุงูุฏูุฉ**: ุชุฌุฑุจุฉ ูุนุงููุงุช ูุฎุชููุฉ
4. **ุงูุงุฎุชุจุงุฑ**: ุงุฎุชุจุงุฑ ุนูู ุจูุงูุงุช ุฌุฏูุฏุฉ
5. **ุงููุดุฑ**: ูุดุฑ ุงูุชุทุจูู ููุงุณุชุฎุฏุงู ุงููุนูู

### ุงููุฑุงุฌุน ุงูุนูููุฉ

1. "Non-invasive Blood Pressure Measurement using Photoplethysmography"
2. "Camera-based Blood Pressure Estimation using Deep Learning"
3. "Remote Photoplethysmography (rPPG) for Blood Pressure Estimation"
4. "Transfer Learning for Medical Image Analysis"

---

## ๐ ูุนูููุงุช ุงููุดุฑูุน

**ุงุณู ุงููุดุฑูุน:** ูุธุงู ููุงุณ ุถุบุท ุงูุฏู ุงูุฐูู

**ุงูุชูููุงุช ุงููุณุชุฎุฏูุฉ:**
- Flutter (Frontend)
- Python/FastAPI (Backend)
- MySQL (Database)
- TensorFlow/Keras (AI/ML)
- OpenCV (Image Processing)

**ุงููุณุฎุฉ:** 1.0.0

**ุงูุชุงุฑูุฎ:** 2024

---

**ููุงุญุธุฉ:** ูุฐุง ุงูุชูุซูู ูุฎุตุต ูููุจุชุฏุฆูู ูุทูุงุจ ูุดุงุฑูุน ุงูุชุฎุฑุฌ. ูุฑุฌู ุงูุฑุฌูุน ุฅูู ุงููููุงุช ุงููููุฉ ููุชูุงุตูู ุงูุชูููุฉ ุงููุชูุฏูุฉ.

---

**ุฌููุน ุงูุญููู ูุญููุธุฉ ยฉ ู.ุนุจุฏ ุงูููููู**

---
